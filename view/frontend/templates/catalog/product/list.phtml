<?php
$uuid = $block->getApiUUID();
$store_id = $block->getStoreId() ? $block->getStoreId() : 1;

try {
    $wishlistData = $block->escapeHtml($this->helper("Magento\Wishlist\Helper\Data")->getAddParams(1));
} catch (Exception $e) {
    $wishlistData = '';
}
?>
<script>
    var WISHLIST_DATA = "<?= /* @noEscape */ $wishlistData; ?>";
</script>
<?php if(!$block->getSerpV2($store_id)): ?>
    <script>
        var __isp_fulltext_search_obj = {
            uuid: "<?= /* @noEscape */ $uuid;?>",
            store_id: <?= /* @noEscape */ $store_id;?>
        };
    </script>
    <?php $results = $block->getSearchResults(); ?>
    <?= /* @noEscape */ $results; ?>
<?php else: ?>
    <?php
    try {
        $cv = $block->getCustomValues($store_id);
        $cv_j_t = json_decode($cv);
        $cv_j = array(
            'config' => $cv_j_t->config,
            'serp_css'=> $cv_j_t->serp_css
        );
    } catch (Exception $e) {
        $cv_j = array(
            'config'=>'',
            'serp_css'=>''
        );
    }
    ?>
    <!---
    Auto-generated by Fast Simon.
    DO NOT EDIT this as this file can be re-written at any time.
    --->

    <div id="fast-config" style="display: none"><?= /* @noEscape */ $cv_j['config']; ?></div>
    <style id="fast-serp-css"><?= /* @noEscape */ $cv_j['serp_css']; ?></style>
    <script class="fast-simon-script">
        var STORE_UUID = "<?= /* @noEscape */ $uuid;?>";
        var STORE_ID = Number("<?= /* @noEscape */ $store_id;?>");
        var FAST_SEARCH_HANDLE = "instantsearchplus/result";
    </script>
    <div id="fast-simon-serp-app" style="display:block;color: initial;background: initial"></div>
    <script>
        var script = document.createElement("script");
        script.src = `https://fastsimon-grid.akamaized.net/init.min.js?v=${Date.now()}`;
        document.body.appendChild(script);
    </script>
<?php endif;?>
