<?php
$ispBlock = $this->getLayout()->createBlock('Autocompleteplus\Autosuggest\Block\SearchResult\ListProduct');

try {
    $wishlistData = $block->escapeHtml($this->helper("Magento\Wishlist\Helper\Data")->getAddParams(1));
} catch (Exception $e) {
    $wishlistData = '';
}
?>
<script>
    var WISHLIST_DATA = "<?= /* @noEscape */ $wishlistData; ?>";
</script>
<?php if(!$ispBlock->getSmnV2($ispBlock->getStoreId())): ?>
    <div id="isp_search_result_page"></div>
    <script src="https://acp-magento.appspot.com/js/search_result_loading_page.js?smart_navigation=1&isp_platform=magento&UUID=<?= /* @noEscape */ $ispBlock->getApiUUID();?>&store_id=<?= /* @noEscape */ $ispBlock->getStoreId(); ?>"></script>
<?php else: ?>
    <?php
    $categoryId = $this->getLayer()->getCurrentCategory()->getId();
    try {
        $cv = $block->getCustomValues($store_id);
        $cv_j_t = json_decode($cv);
        $cv_j = array(
            'config' => $cv_j_t->config,
            'serp_css'=> $cv_j_t->serp_css
        );
    } catch (Exception $e) {
        $cv_j = array(
            'config'=>'',
            'serp_css'=>''
        );
    }
    ?>
    <!---
    Auto-generated by Fast Simon.
    DO NOT EDIT this as this file can be re-written at any time.
    --->

    <div id="fast-config" style="display: none"><?= /* @noEscape */ $cv_j['config']; ?></div>
    <style id="fast-serp-css"><?= /* @noEscape */ $cv_j['serp_css']; ?></style>
    <script class="fast-simon-script">
        var STORE_UUID = "<?= /* @noEscape */ $ispBlock->getApiUUID();?>";
        var STORE_ID = Number("<?= /* @noEscape */ $ispBlock->getStoreId();?>");
        var FAST_SEARCH_HANDLE = "instantsearchplus/result";
        var CATEGORY_ID = "<?= /* @noEscape */ $categoryId; ?>";
    </script>
    <div id="fast-simon-serp-app" style="display:block;color: initial;background: initial"></div>
    <script>
        var script = document.createElement("script");
        script.src = `https://fastsimon-grid.akamaized.net/init.min.js?v=${Date.now()}`;
        document.body.appendChild(script);
    </script>
<?php endif;?>
